import{_ as s,c as i,o as a,a4 as n}from"./chunks/framework.BzdiqRf3.js";const y=JSON.parse('{"title":"Docker compose","description":"","frontmatter":{},"headers":[],"relativePath":"docker-compose.md","filePath":"docker-compose.md"}'),h={name:"docker-compose.md"},k=n(`<h1 id="docker-compose" tabindex="-1">Docker compose <a class="header-anchor" href="#docker-compose" aria-label="Permalink to &quot;Docker compose&quot;">​</a></h1><h2 id="problem" tabindex="-1">Problem <a class="header-anchor" href="#problem" aria-label="Permalink to &quot;Problem&quot;">​</a></h2><p>การที่เราจะต้องมานั่นไล่พิมพ์คำสั่ง docker ไปทีละคำสั่งมันก็คงจะไม่ไหว ถ้าต้องมี container เยอะๆด้วยแล้ว เหนี่อยแย่เลย และอาจจะมีโอกาสพิมพ์ผิด setting ค่าผิดได้ง่ายๆเลยด้วย</p><p>Docker compose จะมาแก้ปัญหานี้แหละ</p><h2 id="compose-yaml" tabindex="-1">compose.yaml <a class="header-anchor" href="#compose-yaml" aria-label="Permalink to &quot;compose.yaml&quot;">​</a></h2><p>docker compose จะให้เราเขียนรายระเอียดเกี่ยวกับ container ของเราไว้ในไฟล์เดียวเลย image อะไร network อะไร binding port อะไรบ้าง ใช้ volume อะไร ระบุไว้ในนี้ได้หมดเลย สุดท้ายเราจะรันคำสั่งแค่คำสั่งเดียวแล้วเราจะได้ระบบของเรามาแบบง่ายๆเลย</p><p>มาเริ่มเขียน compose file กัน</p><p>ให้ตั้งชื่อไฟล์ว่า <strong>compose.yaml</strong></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># compose.yaml</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      NODE_ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">production</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">3000:3000</span></span></code></pre></div><p>มาดูกันทีละส่วน</p><ul><li><code>services</code> ต้องมีแน่ๆ บอกว่ามี container อะไรที่จะต้องรันบ้าง <ul><li><code>next</code> อันนี้เป็นชื่อของ service จะใส่เป็นคำว่าอะไรก็ได้ แล้วแต่ชอบ <ul><li><code>build</code> ส่วนนี้บางทีก็เห็นว่าใช้บ้างไม่ใช้บ้าง ถ้ามี <code>build</code> ตัวนี้นั่นหมายความว่าเราจะไม่ใช้ docker image จากภายนอก เราจะสร้าง docker image ขึ้นมาใช้เอง มันคือส่วนที่บอก docker compose ว่าถ้าจะต้องสร้าง docker image ให้ไปมองหา Dockerfile ได้ที่ไหน <ul><li><code>context: .</code> ซึ่งจุด <code>.</code> เป็นการบอกว่า Dockerfile ที่ต้องไปมองหามันอยู่ใน folder เดียวกันกับ compose file เลย</li></ul></li><li><code>environment</code> คืออยากใส่ ENV อะไรลงไปตอน run container บ้าง ย้ำว่าตอน run นะไม่ใช้ตอนสร้าง image</li><li><code>ports</code> ก็บอกว่าอยากจะ binding port อะไรบ้าง เป็นตัวเลข ซ้าย คั่นด้วย colon แล้วก็ตัวเลขขวา ตัวเลขซ้ายคือ port บน host ตัวเลขขวาคือ port ใน container</li></ul></li></ul></li></ul><h2 id="run-docker-compose" tabindex="-1">run docker compose <a class="header-anchor" href="#run-docker-compose" aria-label="Permalink to &quot;run docker compose&quot;">​</a></h2><p>ลองไป run docker compose กัน</p><p>ก่อนจะไปรันให้ kill container <span style="color:dodgerblue;">next</span> ทิ้งไปก่อน</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> next</span></span></code></pre></div><p>แล้วก็สั่ง</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span></span></code></pre></div><p>ตรงนี้ docker มันจะไปมองหาไฟล์ที่ชื่อ <strong>compose.yaml</strong> เอง ถ้าเจอมันก็จะเอามาใช้เลย แต่ถ้าเราตั้งเป็นชื่ออื่นก็ต้องระบุชื่อไฟล์ด้วยนะ</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> copmose</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">folder/filenam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span></span></code></pre></div><p>ก็จะได้ประมาณนี้</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">❯</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[+] Building 2.9s (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">22/22</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) FINISHED              docker:orbstack</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; [next </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">internal]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> load</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> definition</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Dockerfile</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  0.0s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> transferring</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dockerfile:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2.25kB</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                     0.0s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; [next </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">internal]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> load</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> metadata</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker.io/library/n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  2.3s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; [next </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">auth]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> library/node:pull</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> token</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> registry-1.do</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  0.0s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; [next </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">internal]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> load</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .dockerignore</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                     0.1s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> transferring</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> context:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 672B</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                          0.0s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; [next </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">internal]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> load</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> context</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                     0.1s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> transferring</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> context:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 967B</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                          0.0s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; [next </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">base</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1/1]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker.io/library/node:18-alpine</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  0.0s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CACHED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [next </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">runner</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1/8]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> WORKDIR</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /app</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                  0.0s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CACHED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [next </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">runner</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2/8]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> RUN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> addgroup</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --system</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --gid</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   0.0s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CACHED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [next </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">runner</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 3/8]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> RUN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> adduser</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --system</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --uid</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  0.0s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CACHED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [next </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">deps</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1/4]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> RUN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --no-cache</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> libc6-c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  0.0s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CACHED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [next </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">deps</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2/4]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> WORKDIR</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /app</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                    0.0s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CACHED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [next </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">deps</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 3/4]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> COPY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> package.json</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yarn.lock</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  0.0s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CACHED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [next </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">deps</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 4/4]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> RUN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">-f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yarn.lock</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  0.0s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CACHED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [next </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">builder</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2/4]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> COPY</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --from=deps</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /app/node_</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  0.0s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CACHED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [next </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">builder</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 3/4]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> COPY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                     0.0s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CACHED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [next </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">builder</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 4/4]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> RUN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">-f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yarn.lock</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;   </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">0.0s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CACHED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [next </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">runner</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 4/8]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> COPY</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --from=builder</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /app/pub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  0.0s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CACHED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [next </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">runner</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 5/8]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> RUN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .next</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">               0.0s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CACHED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [next </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">runner</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 6/8]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> RUN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chown</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nextjs:nodejs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .nex</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  0.0s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CACHED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [next </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">runner</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 7/8]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> COPY</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --from=builder</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --chown=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  0.0s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CACHED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [next </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">runner</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 8/8]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> COPY</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --from=builder</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --chown=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  0.0s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; [next] exporting to image                              0.1s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exporting</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> layers</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                    0.0s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> writing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> image</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sha256:d66ab9197c2675ae877ecdccf8cec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  0.0s</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> naming</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker.io/library/next-next</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">               0.0s</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[+] Running 2/1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ✔</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> next_default</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   Create...</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                        0.1s</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ✔</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Container</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> next-next-1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  Creat...</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                         0.1s</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Attaching</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> next-1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">next-1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   ▲</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Next.js</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 14.2.4</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">next-1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Local:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        http://localhost:3000</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">next-1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Network:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      http://0.0.0.0:3000</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">next-1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">next-1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  ✓</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Starting...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">next-1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  ✓</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Ready</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 37ms</span></span></code></pre></div><p>จะเห็นว่า docker มันไปสร้าง image แล้วก็ Running ต่อเลย แล้ว terminal เราก็จะค้างไปเลย</p><p>ให้ลองเข้า <a href="http://localhost:3000" target="_blank" rel="noreferrer">http://localhost:3000</a> เพื่อดูว่า web ทำงานได้หรือเปล่า</p><h2 id="docker-compose-commands" tabindex="-1">Docker compose commands <a class="header-anchor" href="#docker-compose-commands" aria-label="Permalink to &quot;Docker compose commands&quot;">​</a></h2><p>แล้วให้กด <kbd class="kbc-button kbc-button-xs">Ctrl</kbd> + <kbd class="kbc-button kbc-button-xs">c</kbd> เพื่อออกมา เราจะใช้ terminal ได้ปกติ</p><p>แต่ว่า next container ของเราก็จะหยุดไปด้วย</p><p>แต่มันไม่ได้ถูกลบไปนะ ลองเช็คดูได้ด้วยคำสั่ง</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> container</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ls</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -a</span></span></code></pre></div><p>ถ้าเราอยากจะให้มันกลับมา run อีกครั้ง ต่อจากที่หยุดไปก็สั่ง</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span></span></code></pre></div><p>จะได้แบบนี้</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">❯</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[+] Running 1/1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ✔</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Container</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> next-next-1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  Start...</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                         0.3s</span></span></code></pre></div><p>จะเห็นว่า terminal เราก็ไม่ค้างแล้วด้วย</p><p>แต่ถ้าเราอยาก build ใหม่ก็ให้สั่ง stop ก่อน แล้วค่อสั่ง up อีกครั้งหนึ่ง</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stop</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --build</span></span></code></pre></div><p>ใหม่อีกครั้งหนึ่งเท่านั้นเอง</p><p>ถ้าอยาก run compose up แล้ว terminal ไม่ค้างให้ใส่ detach ไปด้วยแบบนี้</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --build</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span></span></code></pre></div><p>ถ้าจะลบออกไปเลย ไม่ต้องเก็บ container ไว้แล้ว ให้สั่ง</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> down</span></span></code></pre></div><h2 id="add-other-services-to-compose-file" tabindex="-1">Add other services to compose file <a class="header-anchor" href="#add-other-services-to-compose-file" aria-label="Permalink to &quot;Add other services to compose file&quot;">​</a></h2><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark has-diff vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      NODE_ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">production</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">3000:3000</span></span>
<span class="line diff add"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  backend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span></span>
<span class="line diff add"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hono</span></span>
<span class="line diff add"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span></span>
<span class="line diff add"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      NODE_ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">production</span></span>
<span class="line diff add"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span></span>
<span class="line diff add"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">3333:3333</span></span></code></pre></div><ul><li><code>backend</code> เป็นชื่อจะใส่อะไรก็แล้วแต่ชอบ</li><li><code>image</code> เราจะไม่ build image เอง เราจะไปเอา image ที่มีอยู่แล้วมาใช้ ถ้ามีแล้วในเครื่องก็จะเอามาใช้เลย ถ้าไม่มีก็จะไป pull มา</li></ul><p>ก่อนจะไปรัน ให้ไปลบ backend ตัวเก่าออกไปก่อน</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hono</span></span></code></pre></div><p>แล้วสั่ง</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">❯</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[+] Running 2/2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ✔</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Container</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> next-next-1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     Ru...</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                         0.0s</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ✔</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Container</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> next-backend-1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  Started</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                       0.3s</span></span></code></pre></div><p>เราสามารถ list รายการ container ที่รันอยู่โดยเอาเฉพาะ container ที่ระบุใน compose file มาได้ด้วยคำสั่งนี้</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ps</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">❯</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ps</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CONTAINER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ID</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   IMAGE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       COMMAND</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                  CREATED</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          STATUS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          PORTS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                       NAMES</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">f72294ef8bb2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   next-next</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   &quot;docker-entrypoint.s…&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   44</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> seconds</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ago</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   Up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 43</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> seconds</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   0.0.0.0:3000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">3000/tcp,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> :::3000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">3000/tcp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   next-next-1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">45eb8bb4181a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   hono</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;docker-entrypoint.s…&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   44</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> seconds</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ago</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   Up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> seconds</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    0.0.0.0:3333</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">3333/tcp,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> :::3333</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">3333/tcp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   next-backend-1</span></span></code></pre></div><p>ตรงนี้ถ้าเปิด <a href="http://localhost:3000" target="_blank" rel="noreferrer">http://localhost:3000</a> จะเจอ error นั้นก็เพราะว่ามันหา <a href="http://hono:3333/users" target="_blank" rel="noreferrer">http://hono:3333/users</a> ไม่เจอ</p><p>มันหาไม่เจอก็เพราะว่า container ที่ชื่อ hono มันไม่มีแล้ว</p><p>docker compose มันจะเอาชื่อ service ไปตั้งเป็นชื่อ container ถ้าเราไม่ได้ระบุชื่อ container name ไว้</p><p>การจะแก้ตรงนี้ก็ทำได้ 2 วิธีคือ</p><ol><li>แก้ชื่อ service ให้เป็น hono ซะ</li><li>ใส่ชื่อ container name ซะ</li></ol><p>ซึ่งผมจะเลือกวิธีที่ 2 ละกัน</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark has-diff vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      NODE_ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">production</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">3000:3000</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  backend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line diff add"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hono</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hono</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      NODE_ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">production</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">3333:3333</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./uploads:/app/uploads</span></span></code></pre></div><p>รอบนี้น่าจะเปิด website ได้แล้ว</p><h2 id="compose-networks" tabindex="-1">compose networks <a class="header-anchor" href="#compose-networks" aria-label="Permalink to &quot;compose networks&quot;">​</a></h2><p>ใน compose file ถ้ามี services หลายๆตัวอยู่ด้วยกันแล้ว docker จะจับไว้ใน network วงเดียวกันอยู่แล้ว</p><p>ลองไปเช็คดูได้</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ls</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark has-diff vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">❯</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ls</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">NETWORK</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ID</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">           DRIVER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    SCOPE</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">62490c6249ac</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   bridge</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">         bridge</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    local</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">f995a98564a2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   host</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">           host</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      local</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">22fb86b854db</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   my_bridge1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     bridge</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    local</span></span>
<span class="line diff add"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">344de646bf6e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   next_default</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   bridge</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    local</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">13fa6f2ef770</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   none</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">           null</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      local</span></span></code></pre></div><p>ซึ่ง docker compose มันจะสร้าง network อีกวงนึงขึ้นมาน่ะแหละ เวลาเราสั่ง <code>docker compose down</code> มันก็จะลบ network ออกไปให้เอง</p><p>แต่ถ้าเราอยากระบุชื่อ network เองก็ทำได้</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark has-diff vp-code" tabindex="0"><code><span class="line diff add"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">networks:</span></span>
<span class="line diff add"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  my_bridge2:</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">services:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  next:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    build:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      context:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    environment:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      NODE_ENV:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> production</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    ports:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 3001:3000</span></span>
<span class="line diff add"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    networks:</span></span>
<span class="line diff add"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> my_bridge2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  backend:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    container_name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hono</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    image:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hono</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    environment:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      NODE_ENV:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> production</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    ports:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 3333:3333</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    volumes:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./uploads:/app/uploads</span></span>
<span class="line diff add"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    networks:</span></span>
<span class="line diff add"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> my_bridge2</span></span></code></pre></div><ul><li><code>networks</code> ด้านบนคือบอกว่ามี network อะไรบ้าง <ul><li><code>my_bridge2</code> ชื่อ network ที่เราต้องการจะสร้าง</li></ul></li></ul><p>ส่วนใน services ต่างๆ เราก็ต้องระบุด้วยว่าจะให้เชื่อมต่อไปที่ network ไหนบ้าง</p><p>พอสั่ง <code>docker compose up -d</code> มันก็จะสร้าง network <strong>my_bridge2</strong> ให้เอง</p><h3 id="use-existing-network-in-compose-file" tabindex="-1">use existing network in compose file <a class="header-anchor" href="#use-existing-network-in-compose-file" aria-label="Permalink to &quot;use existing network in compose file&quot;">​</a></h3><p>ถ้าเราอยากจะให้ compose file ของเรา เชื่อมต่อเข้ากับ networks ที่เคยถูกสร้างมาแล้ว ก็ให้เขียนแบบนี้</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark has-diff vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  my_bridge2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line diff add"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    external</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line diff add"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">my_bridge1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      NODE_ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">production</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">3001:3000</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">my_bridge2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  backend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hono</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hono</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      NODE_ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">production</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">3333:3333</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./uploads:/app/uploads</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">my_bridge2</span></span></code></pre></div>`,75),p=[k];function l(t,e,F,d,r,E){return a(),i("div",null,p)}const o=s(h,[["render",l]]);export{y as __pageData,o as default};
